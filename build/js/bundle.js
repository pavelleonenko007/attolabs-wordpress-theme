(()=>{"use strict";class e{static isEmail(e){return e.value.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}static isEmpty(e){return!e.value}static isChecked(e){return e.checked}}const t=t=>{const s=t.querySelectorAll("[required]");let o=!0;for(let t=0;t<s.length;t++){const i=s[t];"checkbox"!==i.type&&"radio"!==i.type?"email"!==i.type?e.isEmpty(i)&&(i.closest(".input-keeper")?.classList.add("input-keeper--error"),o=!1):e.isEmpty(i)&&!e.isEmail(i)&&(i.closest(".input-keeper")?.classList.add("input-keeper--error"),o=!1):e.isChecked(i)||(i.closest(".input-keeper")?.classList.add("input-keeper--error"),o=!1)}return t.classList.toggle("form-error",!o),o};class s{constructor(e){this.select=e,e?(this.select.style.display="none",this.value=this.select.value,this.options=Array.from(this.select.options),this.isOpen=!1,this.canBlur=!1,this.setupHTML(),this.setEvents(),console.log(this.options.filter((e=>e.selected)))):console.warn("Please provide select element as argument")}setupHTML(){const e=this.options.filter((e=>e.selected)),t=this.options.map((e=>{let t="custom-select__option custom-option";return e.selected&&(t+=" custom-option--selected"),`<li data-select="option" data-value="${e.value}" class="${t}">\n\t\t\t\t<span>${e.textContent}</span>\n\t\t\t</li>`})),s=`<div tabindex="0" class="custom-select" data-select="field">\n\t\t\t<div class="custom-select__head select-head">\n\t\t\t\t<span data-select="selected" class="select-head__selected">${e[0].textContent}</span>\n\t\t\t</div>\n\t\t\t<ul class="custom-select__options" data-select="list">${t.join("")}</ul>\n\t\t</div>`;this.select.insertAdjacentHTML("afterend",s),this.customSelect=this.select.nextElementSibling,this.optionsList=this.customSelect.querySelector('[data-select="list"]'),this.customOptions=Array.from(this.optionsList.querySelectorAll('[data-select="option"]')),this.selectedOptionElement=this.customSelect.querySelector('[data-select="selected"]')}getSelectedCustomOptionIndex(){return this.customOptions.findIndex((e=>e.classList.contains("custom-option--selected")))}getFocusedCustomOptionIndex(){return this.customOptions.findIndex((e=>document.activeElement===e))}handleKeydown(e){if(console.log(e),27===e.keyCode)return e.preventDefault(),void this.close();if(38===e.keyCode&&(e.preventDefault(),this.focus(this.getFocusedCustomOptionIndex()-1)),40===e.keyCode&&(e.preventDefault(),this.focus(this.getFocusedCustomOptionIndex()+1)),32===e.keyCode||13===e.keyCode){e.preventDefault();const t=e.target.dataset.select;if("field"===t)return void(this.isOpen?this.close():this.open());if("option"===t){const t=e.target.dataset.value;return void this.selectValue(t)}}}handleClick(e){const t=e.target.closest("[data-select]");if(!t)return void this.close();const s=t.dataset.select;if("field"!==s&&"selected"!==s||(this.isOpen?this.close():this.open()),"option"===s){const t=e.target.dataset.value;this.selectValue(t)}}handleBlur(e){setTimeout((()=>{document.activeElement.closest(".custom-select")||this.close()}),10)}setEvents(){this.customSelect.addEventListener("keydown",this.handleKeydown.bind(this)),document.body.addEventListener("click",this.handleClick.bind(this)),this.customSelect.addEventListener("blur",this.handleBlur.bind(this)),this.customOptions.forEach((e=>e.addEventListener("blur",this.handleBlur.bind(this))))}open(){if(!this.isOpen)return this.customSelect.classList.add("custom-select--active"),this.customOptions.forEach((e=>{e.setAttribute("tabindex","0")})),this.customOptions[this.getSelectedCustomOptionIndex()].focus(),this.isOpen=!0,this}close(){if(this.isOpen)return this.customSelect.classList.remove("custom-select--active"),this.customOptions.forEach((e=>{e.removeAttribute("tabindex")})),this.isOpen=!1,this}focus(e){if(!this.isOpen)return;let t=e;e>=this.customOptions.length&&(t=0),e<0&&(t=this.customOptions.length-1),this.customOptions[t].focus()}selectValue(e=""){this.select.value=e,this.value=e;const t=this.options.find((t=>t.value===e));this.selectedOptionElement.textContent=t.textContent,this.customOptions.forEach((t=>{const s=t.dataset.value;t.classList.toggle("custom-option--selected",s===e)})),this.close()}getValue(){}}window.addEventListener("load",(()=>{document.querySelectorAll('[data-field="select"]').forEach((e=>{new s(e)})),document.querySelectorAll("[required]").forEach((e=>{e.addEventListener("change",(t=>{const s=e.closest(".input-keeper");s&&(s.classList.remove("input-keeper--error"),e.closest("form")?.classList.remove("form-error"))}))})),document.querySelectorAll('input[type="file"]').forEach((e=>{e.addEventListener("change",(t=>{const s=0===e.files.length,o=e.closest(".input-keeper");if(!o)return;const i=o.querySelector('input[name="link"]');i&&(s?i.setAttribute("required",""):i.removeAttribute("required"))}))})),(()=>{const e=document.querySelectorAll('[data-form="slider"]'),s=async e=>{e.preventDefault();const s=e.target.closest("form"),o=s.querySelector('[type="submit"]'),i=o.value,n=s.parentNode.querySelector(".success-message"),r=s.parentNode.querySelector(".w-form-fail");if(o.value="Processing...",!t(s)){const e=s.querySelector(".input-keeper--error").closest(".w-slide"),t=Array.from(s.querySelectorAll(".w-slide")).indexOf(e),n=s.querySelectorAll(".w-slider-dot");return $(n[t]).trigger("click"),void(o.value=i)}const l=new FormData(s);try{const e=await fetch(ATTO.AJAX_URL,{method:"POST",body:l}),{data:t,success:o}=await e.json();if(!o)throw new Error(t.message);s.style.display="none",n.style.display="block"}catch(e){console.error(e),s.style.display="none",r.style.display="block"}finally{setTimeout((()=>{s.reset(),s.style.display=null,n.style.display=null,r.style.display=null,o.value=i}),3e3)}};e.forEach((e=>{e.addEventListener("submit",s),(e=>{const t=e.querySelectorAll(".form-slide"),s=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){const t=$(e.target).closest(".form-slider");t.removeClass("first-slide"),t.removeClass("last-slide"),$(e.target).next().is(":last-child")?t.addClass("last-slide"):$(e.target).is(":first-child")&&t.addClass("first-slide")}}))}),{threshold:.1,margin:"0px"});t.forEach((e=>{s.observe(e)}))})(e)}))})(),(()=>{const e=document.getElementById("projects-filter-form");if(console.log(e),!e)return;const t=async t=>{t.preventDefault();const s=new FormData(e);let o=!0;(s.has("services[]")||s.has("industries[]"))&&(o=!1),e.classList.toggle("form--active",!o);try{const t=await fetch(ATTO.AJAX_URL,{method:"POST",body:s});if(!t.ok)throw new Error("Something goes wrong");const o=await t.json(),i=document.querySelector(".projects-container"),n=e.querySelector(".form-filters-container");console.log(o),i.innerHTML=o.data.projects,n.innerHTML=o.data["filter-form"],Webflow.destroy(),Webflow.ready(),Webflow.require("ix2").init(),document.dispatchEvent(new Event("readystatechange"))}catch(e){console.error(e)}};e.addEventListener("change",t),e.addEventListener("submit",t),e.addEventListener("reset",(async t=>{t.preventDefault(),e.reset(),e.querySelectorAll('[type="checkbox"]').forEach((e=>{e.checked=!1,e.removeAttribute("checked")})),setTimeout((()=>{e.dispatchEvent(new Event("change"))}),100)}))})(),(()=>{const e=document.querySelectorAll('[data-form="filter-positions"]'),t=async e=>{e.preventDefault();const t=e.target.closest("form"),s=new FormData(t),o=Array.from(document.querySelectorAll(".jobs-item")),i=t.querySelector('button[type="reset"]'),n=!s.has("department")&&!s.has("office")&&!s.has("schedule");o.forEach((e=>{const{department:t,office:o,schedule:i}=e.dataset,n=o.split(","),r=!s.has("department")||t===s.get("department"),l=!s.has("office")||n.includes(s.get("office")),c=!s.has("schedule")||i===s.get("schedule");e.style.display=r&&l&&c?"flex":"none"})),i.classList.toggle("clear-filters--active",!n)},s=e=>{var t;const s=e.target.closest("form"),o=null!==(t=s.dataset.formTrigger)&&void 0!==t?t:"submit";s.reset(),setTimeout((()=>{s.dispatchEvent(new Event(o))}),100)};e.forEach((e=>{var o;const i=null!==(o=e.dataset.formTrigger)&&void 0!==o?o:"submit";e.addEventListener(i,t),e.addEventListener("reset",s)}))})(),(()=>{const e=document.querySelectorAll('[data-form="job-contact"]'),s=async e=>{e.preventDefault();const s=e.target.closest("form"),o=t(s),i=s.querySelector('[type="submit"]'),n=i.value;if(i.value="Processing...",!o)return void(i.value=n);const r=new FormData(s);try{const e=await fetch(ATTO.AJAX_URL,{method:"POST",body:r}),{data:t,success:s}=await e.json();if(!s)throw new Error(t.message);i.value=t.message}catch(e){console.error(e),i.value=e}finally{setTimeout((()=>{i.value=n}),3e3)}};e.forEach((e=>e.addEventListener("submit",s)))})(),document.querySelectorAll('[data-button="copy"]').forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const s=e.querySelector("div:first-child"),o=s.textContent;navigator.clipboard.writeText(window.location.href).then((()=>{e.textContent="Copied to clipboard!",setTimeout((()=>{s.textContent=o}),300)}))}))}))}))})();